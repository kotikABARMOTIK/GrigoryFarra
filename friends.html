<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î—Ä—É–∑—å—è - Garden Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Quicksand:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="js/settings-manager.js"></script>
    <script src="theme-manager.js"></script>
    <script src="lang.js"></script>
    <style>
        [data-theme="dark"] {
            --primary: #66bb6a;
            --primary-dark: #388e3c;
            --primary-light: #1b5e20;
            --text: #ffffff;
            --text-light: #b0b0b0;
            --background: #121212;
            --card-bg: #1e1e1e;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #333333;
        }

        [data-theme="green"] {
            --primary: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #E8F5E9;
            --text: #1B5E20;
            --text-light: #4CAF50;
            --background: #F1F8E9;
            --card-bg: #FFFFFF;
            --shadow: 0 4px 20px rgba(76, 175, 80, 0.15);
            --border: #C8E6C9;
        }

        [data-theme="blue"] {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --primary-light: #E3F2FD;
            --text: #0D47A1;
            --text-light: #2196F3;
            --background: #E3F2FD;
            --card-bg: #FFFFFF;
            --shadow: 0 4px 20px rgba(33, 150, 243, 0.15);
            --border: #BBDEFB;
        }

        [data-theme="green"].dark-mode {
            --primary: #66bb6a;
            --primary-dark: #388e3c;
            --primary-light: #1b5e20;
            --text: #e8f5e9;
            --text-light: #a5d6a7;
            --background: #1b311c;
            --card-bg: #2e4630;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #1b5e20;
        }

        [data-theme="blue"].dark-mode {
            --primary: #64b5f6;
            --primary-dark: #1976d2;
            --primary-light: #0d47a1;
            --text: #e3f2fd;
            --text-light: #90caf9;
            --background: #0d1b33;
            --card-bg: #1e2b47;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #1565c0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
        }

        body {
            background: var(--background);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
            color: var(--text);
            transition: all 0.3s ease;
        }

        header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border: 1px solid var(--border);
            position: relative;
            z-index: 2;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary-dark);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo-icon {
            font-size: 2em;
            color: var(--primary);
        }

.nav-menu {
            display: flex;
            gap: 20px;
            margin-right: 510px;
        }

        .nav-item {
            padding: 10px 20px;
            border-radius: 12px;
            color: var(--primary-dark);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .nav-item:hover {
            background: rgba(241, 248, 233, 0.7);
            transform: translateY(-2px);
        }
        .nav-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .nav-item.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }


        .friends-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .friends-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .friends-title {
            font-family: 'Playfair Display', serif;
            font-size: 3em;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            background: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .friends-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .friend-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .friend-card:hover {
            transform: translateY(-5px);
        }

        .friend-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2em;
            font-weight: bold;
        }

        .friend-name {
            font-size: 1.2em;
            color: var(--text);
            margin-bottom: 5px;
        }

        .friend-level {
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .friend-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8em;
            color: var(--text-light);
        }

        .friend-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary {
            background: var(--border);
            color: var(--text);
        }

        .search-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .search-box {
            display: flex;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        .search-input {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 5px;
            background: var(--card-bg);
            color: var(--text);
        }

        .message-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .messages-list {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 10px;
        }

        .message {
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 10px;
            max-width: 80%;
        }

        .message.own {
            background: var(--primary-light);
            margin-left: auto;
            border-bottom-right-radius: 2px;
        }

        .message.friend {
            background: var(--card-bg);
            border: 1px solid var(--border);
            margin-right: auto;
            border-bottom-left-radius: 2px;
        }

        .message-sender {
            font-weight: bold;
            color: var(--primary);
            font-size: 0.9em;
        }

        .message-text {
            margin: 5px 0;
        }

        .message-input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 5px;
            margin-bottom: 10px;
            background: var(--card-bg);
            color: var(--text);
        }

        .empty-state {
            text-align: center;
            color: var(--text-light);
            padding: 40px;
        }

        .online-status {
            margin-top: 10px;
            font-size: 0.9em;
        }

        .online {
            color: #4caf50;
        }

        .offline {
            color: #666;
        }

        .typing-indicator {
            color: var(--text-light);
            font-style: italic;
            font-size: 0.9em;
            margin: 5px 0;
            padding: 10px;
            display: none;
        }

        .message-time {
            font-size: 0.8em;
            color: var(--text-light);
            text-align: right;
        }

        .chat-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .back-button {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1.2em;
        }

        .status-change-notification {
            background: var(--primary-light);
            color: var(--primary-dark);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin: 5px 0;
            text-align: center;
            font-style: italic;
        }

        .group-chat-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .group-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
        }

        .group-info {
            flex: 1;
        }

        .group-members {
            font-size: 0.9em;
            color: var(--text-light);
            margin-top: 5px;
        }

        .message.system {
            background: var(--primary-light);
            color: var(--primary-dark);
            text-align: center;
            font-style: italic;
            margin: 10px auto;
            max-width: 60%;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9em;
        }

        .group-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .group-option {
            padding: 8px 15px;
            border: 1px solid var(--border);
            border-radius: 20px;
            background: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .group-option.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .message-input-group {
            display: flex;
            gap: 10px;
        }

        .group-members-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }

        .member-tag {
            background: var(--primary-light);
            color: var(--primary-dark);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo" onclick="window.location.href='main-site.html'">
            <div class="logo-icon">üåø</div>
            <div class="logo-text">Garden Game</div>
        </div>
        
        <div class="nav-menu">
            <a href="main-site.html" class="nav-item">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="profile.html" class="nav-item">–ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="shop.html" class="nav-item">–ú–∞–≥–∞–∑–∏–Ω</a>
            <a href="friends.html" class="nav-item active">–î—Ä—É–∑—å—è</a>
            <a href="games.html" class="nav-item">–ò–≥—Ä—ã</a>
            <a href="settings.html" class="nav-item">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        </div>
    </header>

    <div class="friends-container">
        <div class="friends-header">
            <h1 class="friends-title">–°–æ–æ–±—â–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π</h1>
            <p>–ù–∞—Ö–æ–¥–∏—Ç–µ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π, –æ–±—â–∞–π—Ç–µ—Å—å –∏ —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å –≤–º–µ—Å—Ç–µ</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('friends')">–ú–æ–∏ –¥—Ä—É–∑—å—è</button>
            <button class="tab" onclick="showTab('search')">–ù–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π</button>
            <button class="tab" onclick="showTab('messages')">–°–æ–æ–±—â–µ–Ω–∏—è</button>
            <button class="tab" onclick="showTab('group')">–ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</button>
        </div>

        <div id="friendsTab" class="tab-content">
            <div class="friends-grid" id="friendsGrid">
                <!-- –î—Ä—É–∑—å—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <div id="searchTab" class="tab-content" style="display: none;">
            <div class="search-section">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    <button class="btn btn-primary" onclick="searchUsers()">–ü–æ–∏—Å–∫</button>
                </div>
            </div>
            <div class="friends-grid" id="searchResults">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
            </div>
        </div>

        <div id="messagesTab" class="tab-content" style="display: none;">
            <div class="message-section">
                <div id="chatHeader" class="chat-header" style="display: none;">
                    <button class="back-button" onclick="showFriendsList()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div>
                        <div id="currentFriendName" style="font-weight: bold;"></div>
                        <div id="currentFriendStatus" class="online-status"></div>
                    </div>
                </div>
                <div class="messages-list" id="messagesList">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div id="typingIndicator" class="typing-indicator"></div>
                <div id="messageInputContainer" style="display: none;">
                    <input type="text" class="message-input" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleMessageKeypress(event)">
                    <button class="btn btn-primary" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="groupTab" class="tab-content" style="display: none;">
            <div class="message-section">
                <div class="group-chat-header">
                    <div class="group-avatar">üë•</div>
                    <div class="group-info">
                        <div style="font-weight: bold;" id="groupTitle">–°–∞–¥–æ–≤–∞—è –±–µ—Å–µ–¥–∫–∞</div>
                        <div class="group-members">
                            –£—á–∞—Å—Ç–Ω–∏–∫–∏: <span id="groupMembersCount">0</span>
                            <div class="group-members-list" id="groupMembersList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="group-selector">
                    <div class="group-option active" onclick="switchGroup('garden')">–°–∞–¥–æ–≤–∞—è –±–µ—Å–µ–¥–∫–∞</div>
                    <div class="group-option" onclick="switchGroup('plants')">–õ—é–±–∏—Ç–µ–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π</div>
                    <div class="group-option" onclick="switchGroup('tips')">–°–æ–≤–µ—Ç—ã –ø–æ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤—É</div>
                    <div class="group-option" onclick="switchGroup('newbies')">–ù–æ–≤–∏—á–∫–∏ –≤ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–µ</div>
                    <div class="group-option" onclick="switchGroup('experts')">–≠–∫—Å–ø–µ—Ä—Ç—ã —Å–∞–¥–æ–≤–æ–¥—ã</div>
                </div>
                
                <div class="messages-list" id="groupMessagesList">
                    <!-- –ì—Ä—É–ø–ø–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div id="groupTypingIndicator" class="typing-indicator"></div>
                <div class="message-input-group">
                    <input type="text" class="message-input" id="groupMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≥—Ä—É–ø–ø—ã..." onkeypress="handleGroupMessageKeypress(event)">
                    <button class="btn btn-primary" onclick="sendGroupMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentTab = 'friends';
        let selectedFriend = null;
        let currentGroup = 'garden';

        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const demoUsers = [
            { 
                username: "–°–∞–¥–æ–≤–Ω–∏–∫", 
                email: "gardener@example.com",
                level: 5, 
                plants: 23, 
                friends: 15, 
                online: true,
                avatar: "üåø",
                lastSeen: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
                personality: "enthusiastic",
                responseDelay: 2000,
                interests: ["–æ–≤–æ—â–∏", "—Ç–æ–º–∞—Ç—ã", "–æ–≥—É—Ä—Ü—ã"]
            },
            { 
                username: "–¶–≤–µ—Ç–æ–≤–æ–¥", 
                email: "florist@example.com",
                level: 3, 
                plants: 15, 
                friends: 8, 
                online: true,
                avatar: "üåª",
                lastSeen: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
                personality: "calm",
                responseDelay: 3000,
                interests: ["—Ä–æ–∑—ã", "–æ—Ä—Ö–∏–¥–µ–∏", "–ª–∏–ª–∏–∏"]
            },
            { 
                username: "–§–ª–æ—Ä–∏—Å—Ç", 
                email: "floral@example.com",
                level: 7, 
                plants: 45, 
                friends: 22, 
                online: true,
                avatar: "üå∏",
                lastSeen: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
                personality: "creative",
                responseDelay: 1500,
                interests: ["–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏", "–±—É–∫–µ—Ç—ã", "–¥–∏–∑–∞–π–Ω"]
            },
            { 
                username: "–õ–∞–Ω–¥—à–∞—Ñ—Ç", 
                email: "landscape@example.com",
                level: 4, 
                plants: 18, 
                friends: 10, 
                online: true,
                avatar: "üå≥",
                lastSeen: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
                personality: "professional",
                responseDelay: 2500,
                interests: ["–¥–µ—Ä–µ–≤—å—è", "–∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∏", "–≥–∞–∑–æ–Ω—ã"]
            },
            { 
                username: "–†–æ–∑–æ—á–∫–∞", 
                email: "rose@example.com",
                level: 6, 
                plants: 32, 
                friends: 18, 
                online: true,
                avatar: "üåπ",
                lastSeen: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
                personality: "romantic",
                responseDelay: 3500,
                interests: ["—Ä–æ–∑—ã", "–ø–∏–æ–Ω—ã", "–≥–æ—Ä—Ç–µ–Ω–∑–∏–∏"]
            }
        ];

        // –ë–∞–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        const responseDatabase = {
            enthusiastic: [
                "–û—Ç–ª–∏—á–Ω–æ! –£ –º–µ–Ω—è —Ç–æ–∂–µ –≤—Å–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —Ä–∞—Å—Ç–µ—Ç! üå±",
                "–û, —ç—Ç–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –•–æ—á–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–∏ –Ω–æ–≤—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è?",
                "–ö–∞–∫ —Ä–∞–∑ –¥—É–º–∞–ª –æ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ—Å–∞–¥–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ!",
                "–£—Ö —Ç—ã! –ê —É –º–µ–Ω—è —Å–µ–≥–æ–¥–Ω—è –≤—ã—Ä–æ—Å –ø–µ—Ä–≤—ã–π –ø–æ–º–∏–¥–æ—Ä! üçÖ",
                "–î–∞–≤–∞–π –≤–º–µ—Å—Ç–µ –ø–æ—Å–∞–¥–∏–º —á—Ç–æ-–Ω–∏–±—É–¥—å! –£ –º–µ–Ω—è –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –≥–æ—Ä—à–∫–∏!",
                "–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–≥–æ–¥–∞ –¥–ª—è —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–∞, –Ω–µ –ø—Ä–∞–≤–¥–∞ –ª–∏? ‚òÄÔ∏è",
                "–¢–æ–ª—å–∫–æ —á—Ç–æ –ø–æ–ª–∏–ª –≤—Å–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –æ–Ω–∏ —Ç–∞–∫–∏–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ! üíß"
            ],
            calm: [
                "–ü—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å. –£ –º–µ–Ω—è –≤—Å–µ —Ä–∞—Å—Ç–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –≤–µ—Ä–Ω–æ.",
                "–°–ø–∞—Å–∏–±–æ, —É –º–µ–Ω—è —Ç–æ–∂–µ –≤—Å–µ —Ö–æ—Ä–æ—à–æ. –†–∞—Å—Ç–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç —Ç–µ—Ä–ø–µ–Ω–∏—è.",
                "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ... –ê –∫–∞–∫–∏–µ —Ü–≤–µ—Ç—ã —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?",
                "–£ –º–µ–Ω—è —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–π —Å–ø–æ–∫–æ–π–Ω—ã–π –¥–µ–Ω—å –≤ —Å–∞–¥—É...",
                "–†–∞—Å—Ç–µ–Ω–∏—è taught me patience. Everything in its own time.",
                "–ü—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞—é –∑–∞ —Ç–µ–º, –∫–∞–∫ —Ä–∞—Å—Ç—É—Ç –º–æ–∏ —Ü–≤–µ—Ç—ã. –≠—Ç–æ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–æ."
            ],
            creative: [
                "–û! –£ –º–µ–Ω—è –ø–æ—è–≤–∏–ª–∞—Å—å –∏–¥–µ—è –¥–ª—è –Ω–æ–≤–æ–π —Ü–≤–µ—Ç–æ—á–Ω–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏!",
                "–¢–≤–æ–∏ —Å–ª–æ–≤–∞ –≤–¥–æ—Ö–Ω–æ–≤–∏–ª–∏ –º–µ–Ω—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–∞–¥–æ–≤–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞!",
                "–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å, –µ—Å–ª–∏ –±—ã –º—ã —Å–æ–∑–¥–∞–ª–∏ —Å–∞–¥ –≤ —Å—Ç–∏–ª–µ –∏–º–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º–∞?",
                "–¶–≤–µ—Ç–∞ —Ç–≤–æ–µ–≥–æ —Å–∞–¥–∞ –∑–≤—É—á–∞—Ç –ø–æ—Ç—Ä—è—Å–∞—é—â–µ! –•–æ—á—É —É–≤–∏–¥–µ—Ç—å —Ñ–æ—Ç–æ!",
                "–£ –º–µ–Ω—è –µ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–Ω–∞—è –∏–¥–µ—è –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞!",
                "–¢–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª –Ω–æ–≤—É—é —Å—Ö–µ–º—É –ø–æ—Å–∞–¥–∫–∏ - –±—É–¥–µ—Ç –æ—á–µ–Ω—å –Ω–µ–æ–±—ã—á–Ω–æ!"
            ],
            professional: [
                "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –ö–∞–∫–∏–µ —É–¥–æ–±—Ä–µ–Ω–∏—è —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å?",
                "–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª–∏–≤–∞ - –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.",
                "–£ —Ç–µ–±—è —Ö–æ—Ä–æ—à–∏–π –ø–æ–¥—Ö–æ–¥. –Ø –±—ã –¥–æ–±–∞–≤–∏–ª –Ω–µ–º–Ω–æ–≥–æ –∫–æ–º–ø–æ—Å—Ç–∞.",
                "–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞, —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.",
                "–ó–∞–º–µ—Ç–∏–ª, —á—Ç–æ –ø—Ä–∏ —Ç–∞–∫–æ–º —É—Ö–æ–¥–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —Ä–∞—Å—Ç—É—Ç –Ω–∞ 20% –±—ã—Å—Ç—Ä–µ–µ.",
                "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç: –ø–æ–ø—Ä–æ–±—É–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–ø–µ–ª—å–Ω—ã–π –ø–æ–ª–∏–≤."
            ],
            romantic: [
                "–ö–∞–∫–∞—è —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è –∏–¥–µ—è! –¶–≤–µ—Ç—ã - —ç—Ç–æ —è–∑—ã–∫ –ª—é–±–≤–∏...",
                "–ú–æ–∏ —Ä–æ–∑—ã —Å–µ–≥–æ–¥–Ω—è –ø–∞—Ö–Ω—É—Ç –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–µ–∂–Ω–æ... üåπ",
                "–í —Å–∞–¥—É —Ç–∞–∫ –∫—Ä–∞—Å–∏–≤–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º —Å–≤–µ—Ç–µ...",
                "–ö–∞–∂–¥—ã–π —Ü–≤–µ—Ç–æ–∫ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é –ª—é–±–≤–∏...",
                "–¢–≤–æ–∏ —Å–ª–æ–≤–∞ –∫–∞–∫ —É—Ç—Ä–µ–Ω–Ω—è—è —Ä–æ—Å–∞ –Ω–∞ –ª–µ–ø–µ—Å—Ç–∫–∞—Ö —Ä–æ–∑...",
                "–°–∞–¥ - —ç—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ —Ä–∞—Å—Ü–≤–µ—Ç–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç—ã, –Ω–æ –∏ —á—É–≤—Å—Ç–≤–∞..."
            ]
        };

        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞
        const groupResponses = {
            garden: [
                "–ö—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–æ–±–æ–≤–∞–ª –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å –ø–æ–º–∏–¥–æ—Ä—ã –Ω–∞ –±–∞–ª–∫–æ–Ω–µ?",
                "–£ –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–ª–µ–π –Ω–∞ —Ä–æ–∑–∞—Ö, –µ—Å—Ç—å —Å–æ–≤–µ—Ç—ã?",
                "–ö–∞–∫–∏–µ —Ü–≤–µ—Ç—ã –ª—É—á—à–µ –ø–æ—Å–∞–¥–∏—Ç—å –≤ —Ç–µ–Ω–∏—Å—Ç–æ–º —É–≥–æ–ª–∫–µ —Å–∞–¥–∞?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è –æ—Ä—Ö–∏–¥–µ–π!",
                "–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –ø–æ–ª–∏–≤–∞–µ—Ç–µ —Å–≤–æ–∏ –∫–∞–∫—Ç—É—Å—ã?",
                "–ö—Ç–æ-–Ω–∏–±—É–¥—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∏–¥—Ä–æ–ø–æ–Ω–∏–∫—É –¥–ª—è —Ä–∞—Å—Ç–µ–Ω–∏–π?",
                "–ö–∞–∫–∏–µ —É–¥–æ–±—Ä–µ–Ω–∏—è –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ —Å–∞–º—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ —Å–≤–æ–∏—Ö —Å–∞–¥–æ–≤! üå∏",
                "–£ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –µ—Å—Ç—å –æ–ø—ã—Ç —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º –æ–∑–µ–ª–µ–Ω–µ–Ω–∏–µ–º?",
                "–ö–∞–∫–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö?"
            ],
            plants: [
                "–£ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –µ—Å—Ç—å –æ–ø—ã—Ç —Å –±–æ–Ω—Å–∞–π?",
                "–ö–∞–∫–∏–µ –∫–æ–º–Ω–∞—Ç–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —Å–∞–º—ã–µ –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ?",
                "–ö—Ç–æ –∑–Ω–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–µ —Å–æ—Ä—Ç–∞ —Ç–æ–º–∞—Ç–æ–≤ –¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –∫–ª–∏–º–∞—Ç–∞?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è –∞–≤–æ–∫–∞–¥–æ –∏–∑ –∫–æ—Å—Ç–æ—á–∫–∏!",
                "–ö–∞–∫–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –æ—á–∏—â–∞—é—Ç –≤–æ–∑–¥—É—Ö –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ?",
                "–£ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –µ—Å—Ç—å –æ–ø—ã—Ç —Å —Ö–∏—â–Ω—ã–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏?",
                "–ö–∞–∫–∏–µ –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–µ —Ü–≤–µ—Ç—ã —Å–∞–º—ã–µ –¥–æ–ª–≥–æ—Ü–≤–µ—Ç—É—â–∏–µ?",
                "–ö—Ç–æ –≤—ã—Ä–∞—â–∏–≤–∞–µ—Ç —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è?",
                "–ö–∞–∫–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã—Ä–∞—Å—Ç–∏—Ç—å –Ω–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–µ?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö –¥–æ–º–∞!"
            ],
            tips: [
                "–°–æ–≤–µ—Ç: –Ω–µ –ø–æ–ª–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —Ö–æ–ª–æ–¥–Ω–æ–π –≤–æ–¥–æ–π!",
                "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–π—Ç–µ –¥—Ä–µ–Ω–∞–∂ –≤ –≥–æ—Ä—à–∫–∞—Ö!",
                "–ü–æ–¥–∫–∞—Ä–º–ª–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–∏–æ–¥ —Ä–æ—Å—Ç–∞.",
                "–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤—Ä–µ–¥–∏—Ç–µ–ª–µ–π.",
                "–ù–µ —Å—Ç–∞–≤—å—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —Ä—è–¥–æ–º —Å –±–∞—Ç–∞—Ä–µ—è–º–∏ –∑–∏–º–æ–π.",
                "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç—Å—Ç–æ—è–Ω–Ω—É—é –≤–æ–¥—É –¥–ª—è –ø–æ–ª–∏–≤–∞.",
                "–ü–µ—Ä–µ—Å–∞–∂–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –≤–µ—Å–Ω–æ–π, –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–æ—Å—Ç–∞.",
                "–û–±—Ä–µ–∑–∞–π—Ç–µ —Å—É—Ö–∏–µ –ª–∏—Å—Ç—å—è –∏ —Ü–≤–µ—Ç—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ.",
                "–†—ã—Ö–ª–∏—Ç–µ –ø–æ—á–≤—É –¥–ª—è –ª—É—á—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –≤–æ–∑–¥—É—Ö–∞ –∫ –∫–æ—Ä–Ω—è–º.",
                "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —É–¥–æ–±—Ä–µ–Ω–∏—è - –æ–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ!"
            ],
            newbies: [
                "–° —á–µ–≥–æ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤–∏—á–∫—É –≤ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–µ?",
                "–ö–∞–∫–∏–µ —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ–ø—ã—Ç–∞?",
                "–ö–∞–∫ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–ª–∏–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è?",
                "–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–µ –Ω–∞—á–∞–ª–æ –≤—è–Ω—É—Ç—å?",
                "–ö–∞–∫–∏–µ —Å–∞–º—ã–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–æ–≤–∏—á–∫–æ–≤?",
                "–ù—É–∂–Ω–æ –ª–∏ —Å—Ä–∞–∑—É –ø–æ–∫—É–ø–∞—Ç—å –¥–æ—Ä–æ–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã?",
                "–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≥–æ—Ä—à–æ–∫ –¥–ª—è —Ä–∞—Å—Ç–µ–Ω–∏—è?",
                "–ö–∞–∫–∞—è –ø–æ—á–≤–∞ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö?",
                "–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏—é –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–≤–µ—Ç–∞?",
                "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω—É–∂–Ω–æ —É–¥–µ–ª—è—Ç—å —Å–∞–¥—É –µ–∂–µ–¥–Ω–µ–≤–Ω–æ?"
            ],
            experts: [
                "–ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—ã –∫–∞–ø–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º —Å –≥–∏–¥—Ä–æ–ø–æ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏!",
                "–ö–∞–∫–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–µ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?",
                "–ö–∞–∫ –±–æ—Ä–æ—Ç—å—Å—è —Å —Ä–µ–¥–∫–∏–º–∏ –≤–∏–¥–∞–º–∏ –≤—Ä–µ–¥–∏—Ç–µ–ª–µ–π?",
                "–ö—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Å–µ–ª–µ–∫—Ü–∏–µ–π —Ä–∞—Å—Ç–µ–Ω–∏–π?",
                "–ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏ —Å–∞–º—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ?",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º —Å —Ç–µ–ø–ª–∏—á–Ω—ã–º —Ö–æ–∑—è–π—Å—Ç–≤–æ–º!",
                "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –±–æ–ª—å—à–æ–º —Å–∞–¥—É?",
                "–ö–∞–∫–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?",
                "–°–æ–≤–µ—Ç—ã –ø–æ –≤–µ–¥–µ–Ω–∏—é —Å–∞–¥–æ–≤–æ–¥—á–µ—Å–∫–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞?"
            ]
        };

        // –û–±—â–∏–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        const generalResponses = [
            "–ö–∞–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ!",
            "–£—Ö —Ç—ã! –ê —É –º–µ–Ω—è —Å–µ–≥–æ–¥–Ω—è —Ç–æ–∂–µ –∫–æ–µ-—á—Ç–æ –Ω–æ–≤–æ–µ!",
            "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–¥–µ–ª–∏–ª—Å—è! –≠—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç!",
            "–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –Ø —Ç–æ–∂–µ —Ç–∞–∫ –¥—É–º–∞—é!",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ... –ê –∫–∞–∫ —Ç—ã –∫ —ç—Ç–æ–º—É –ø—Ä–∏—à–µ–ª?",
            "–ü–æ–Ω—è—Ç–Ω–æ. –ê —á—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?",
            "–ó–¥–æ—Ä–æ–≤–æ! –•–æ—á–µ—à—å, –ø–æ–∫–∞–∂—É —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è?",
            "–ú–æ–ª–æ–¥–µ—Ü! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!",
            "–≠—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –º–Ω–µ –æ–¥–Ω—É –∏—Å—Ç–æ—Ä–∏—é –∏–∑ –º–æ–µ–≥–æ —Å–∞–¥–∞...",
            "–ö–∞–∫ —Ä–∞–∑ –≤–æ–≤—Ä–µ–º—è! –£ –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ!"
        ];

        // –ù–∞–∑–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø
        const groupTitles = {
            garden: "–°–∞–¥–æ–≤–∞—è –±–µ—Å–µ–¥–∫–∞",
            plants: "–õ—é–±–∏—Ç–µ–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π",
            tips: "–°–æ–≤–µ—Ç—ã –ø–æ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤—É",
            newbies: "–ù–æ–≤–∏—á–∫–∏ –≤ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–µ",
            experts: "–≠–∫—Å–ø–µ—Ä—Ç—ã —Å–∞–¥–æ–≤–æ–¥—ã"
        };

        document.addEventListener('DOMContentLoaded', function() {
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ
            if (!sessionStorage.getItem('currentUser')) {
                const testUser = {
                    username: "–¢–µ—Å—Ç–æ–≤—ã–π–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                    email: "test@example.com",
                    level: 3,
                    plants: 12,
                    friends: 5
                };
                sessionStorage.setItem('currentUser', JSON.stringify(testUser));
            }
            
            currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
            initializeDemoData();
            loadFriends();
            updateGroupMembers();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç —Å –∞–∫—Ç–∏–≤–Ω—ã–º –æ–±—â–µ–Ω–∏–µ–º
            startGroupChatActivity();
        });

        function initializeDemoData() {
            let users = JSON.parse(localStorage.getItem('users')) || [];
            
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            if (users.length === 0) {
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                users.push({
                    ...currentUser,
                    password: "test123",
                    plants: [],
                    settings: {},
                    messages: [],
                    friends: [],
                    groupMessages: {
                        garden: [],
                        plants: [],
                        tips: [],
                        newbies: [],
                        experts: []
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                demoUsers.forEach(demoUser => {
                    users.push({
                        ...demoUser,
                        password: "demo123",
                        plants: [],
                        settings: {},
                        messages: [],
                        friends: [],
                        groupMessages: {
                            garden: [],
                            plants: [],
                            tips: [],
                            newbies: [],
                            experts: []
                        }
                    });
                });
                
                localStorage.setItem('users', JSON.stringify(users));
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–∑–µ–π –∫ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
            const currentUserData = users.find(u => u.email === currentUser.email);
            if (currentUserData && (!currentUserData.friends || currentUserData.friends.length === 0)) {
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ—Ö –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–∞–∫ –¥—Ä—É–∑–µ–π
                currentUserData.friends = demoUsers.map(friend => ({
                    username: friend.username,
                    level: friend.level,
                    plants: friend.plants,
                    friends: friend.friends,
                    online: friend.online,
                    avatar: friend.avatar,
                    lastSeen: friend.lastSeen,
                    personality: friend.personality,
                    responseDelay: friend.responseDelay,
                    interests: friend.interests
                }));
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–º–æ-—Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
                if (!currentUserData.messages || currentUserData.messages.length === 0) {
                    currentUserData.messages = [
                        {
                            sender: "–°–∞–¥–æ–≤–Ω–∏–∫",
                            receiver: currentUser.username,
                            text: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–≤–æ–π —Å–∞–¥ –ø–æ–∂–∏–≤–∞–µ—Ç?",
                            time: "10:30",
                            date: "2024-01-15"
                        },
                        {
                            sender: currentUser.username,
                            receiver: "–°–∞–¥–æ–≤–Ω–∏–∫",
                            text: "–ü—Ä–∏–≤–µ—Ç! –í—Å–µ –æ—Ç–ª–∏—á–Ω–æ, —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–æ—Å–∞–¥–∏–ª –Ω–æ–≤—ã–µ —Ä–æ–∑—ã üåπ",
                            time: "10:32",
                            date: "2024-01-15"
                        },
                        {
                            sender: "–°–∞–¥–æ–≤–Ω–∏–∫",
                            receiver: currentUser.username,
                            text: "–ö—Ä—É—Ç–æ! –£ –º–µ–Ω—è —Ç–æ–∂–µ –Ω–æ–≤—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å. –•–æ—á–µ—à—å –æ–±–º–µ–Ω—è—Ç—å—Å—è —Å–µ–º–µ–Ω–∞–º–∏?",
                            time: "10:35",
                            date: "2024-01-15"
                        },
                        {
                            sender: "–¶–≤–µ—Ç–æ–≤–æ–¥",
                            receiver: currentUser.username,
                            text: "–ü—Ä–∏–≤–µ—Ç! –í–∏–¥–µ–ª–∞ —Ç–≤–æ–∏ —Ä–æ–∑—ã - –æ–Ω–∏ –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã!",
                            time: "11:20",
                            date: "2024-01-15"
                        },
                        {
                            sender: "–§–ª–æ—Ä–∏—Å—Ç",
                            receiver: currentUser.username,
                            text: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ü–≤–µ—Ç–æ—á–Ω—É—é –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –≤–º–µ—Å—Ç–µ?",
                            time: "14:15",
                            date: "2024-01-15"
                        }
                    ];
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥—Ä—É–ø–ø–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º –æ–±—â–µ–Ω–∏–µ–º
                if (!currentUserData.groupMessages.garden || currentUserData.groupMessages.garden.length === 0) {
                    currentUserData.groupMessages = {
                        garden: [
                            {
                                sender: "–°–∞–¥–æ–≤–Ω–∏–∫",
                                text: "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö–∞–∫ –≤–∞—à–∏ —Å–∞–¥–æ–≤—ã–µ –¥–µ–ª–∞?",
                                time: "09:15",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–¶–≤–µ—Ç–æ–≤–æ–¥",
                                text: "–£ –º–µ–Ω—è –∑–∞—Ü–≤–µ–ª–∏ –ø–µ—Ä–≤—ã–µ —Ç—é–ª—å–ø–∞–Ω—ã! üå∑",
                                time: "09:20",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–§–ª–æ—Ä–∏—Å—Ç",
                                text: "–ö—Ç–æ-–Ω–∏–±—É–¥—å —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—É—é –∫–ª—É–º–±—É?",
                                time: "09:25",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–õ–∞–Ω–¥—à–∞—Ñ—Ç",
                                text: "–ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Å—É–¥–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É —Å–∞–¥–æ–≤ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",
                                time: "10:00",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–†–æ–∑–æ—á–∫–∞",
                                text: "–ú–æ–∏ —Ä–æ–∑—ã —Å–µ–≥–æ–¥–Ω—è –æ—Å–æ–±–µ–Ω–Ω–æ –∞—Ä–æ–º–∞—Ç–Ω—ã! üåπ",
                                time: "10:15",
                                date: "2024-01-15"
                            },
                            {
                                sender: "system",
                                text: "–í—Å–µ –¥—Ä—É–∑—å—è —Ç–µ–ø–µ—Ä—å –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ!",
                                time: "10:30",
                                date: "2024-01-15"
                            }
                        ],
                        plants: [
                            {
                                sender: "–°–∞–¥–æ–≤–Ω–∏–∫",
                                text: "–ö–∞–∫–∏–µ —Å–æ—Ä—Ç–∞ —Ç–æ–º–∞—Ç–æ–≤ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –±–∞–ª–∫–æ–Ω–∞?",
                                time: "08:45",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–¶–≤–µ—Ç–æ–≤–æ–¥",
                                text: "–£ –º–µ–Ω—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏–∑ 35 –∫–∞–∫—Ç—É—Å–æ–≤! –ö—Ç–æ –µ—â–µ —É–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å—É–∫–∫—É–ª–µ–Ω—Ç–∞–º–∏?",
                                time: "09:10",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–§–ª–æ—Ä–∏—Å—Ç",
                                text: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å –º–∏–∫—Ä–æ–∑–µ–ª–µ–Ω—å - —ç—Ç–æ –±—ã—Å—Ç—Ä–æ –∏ –ø–æ–ª–µ–∑–Ω–æ!",
                                time: "09:30",
                                date: "2024-01-15"
                            }
                        ],
                        tips: [
                            {
                                sender: "–õ–∞–Ω–¥—à–∞—Ñ—Ç",
                                text: "–°–æ–≤–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–∏—á–Ω—É—é —Å–∫–æ—Ä–ª—É–ø—É –∫–∞–∫ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ!",
                                time: "07:30",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–†–æ–∑–æ—á–∫–∞",
                                text: "–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –º—É–ª—å—á–∏—Ä–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–ª–∞–≥—É –∏ –∑–∞—â–∏—â–∞–µ—Ç –∫–æ—Ä–Ω–∏",
                                time: "08:15",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–°–∞–¥–æ–≤–Ω–∏–∫",
                                text: "–ü–æ–ª–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è —É—Ç—Ä–æ–º - —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥—Ä–∏–±–∫–æ–≤—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
                                time: "08:45",
                                date: "2024-01-15"
                            }
                        ],
                        newbies: [
                            {
                                sender: "–¶–≤–µ—Ç–æ–≤–æ–¥",
                                text: "–° —á–µ–≥–æ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤–∏—á–∫—É –≤ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–µ?",
                                time: "10:00",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–§–ª–æ—Ä–∏—Å—Ç",
                                text: "–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π - —Å–∞–Ω—Å–µ–≤–∏–µ—Ä–∏–∏ –∏–ª–∏ –∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å–∞",
                                time: "10:15",
                                date: "2024-01-15"
                            }
                        ],
                        experts: [
                            {
                                sender: "–õ–∞–Ω–¥—à–∞—Ñ—Ç",
                                text: "–ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—ã –∫–∞–ø–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞?",
                                time: "11:00",
                                date: "2024-01-15"
                            },
                            {
                                sender: "–†–æ–∑–æ—á–∫–∞",
                                text: "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º —Å –≥–∏–¥—Ä–æ–ø–æ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏!",
                                time: "11:20",
                                date: "2024-01-15"
                            }
                        ]
                    };
                }
                
                localStorage.setItem('users', JSON.stringify(users));
            }
        }

        function startGroupChatActivity() {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
            setInterval(() => {
                if (currentTab === 'group') {
                    generateRandomGroupMessage();
                }
            }, 15000); // –ö–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
        }

        function generateRandomGroupMessage() {
            const responses = groupResponses[currentGroup] || [];
            if (responses.length === 0) return;

            const randomFriend = demoUsers[Math.floor(Math.random() * demoUsers.length)];
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex !== -1 && users[userIndex].groupMessages) {
                const groupMessage = {
                    sender: randomFriend.username,
                    text: randomResponse,
                    time: new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
                    date: new Date().toISOString().split('T')[0]
                };
                
                users[userIndex].groupMessages[currentGroup].push(groupMessage);
                localStorage.setItem('users', JSON.stringify(users));
                
                if (currentTab === 'group') {
                    loadGroupMessages();
                }
            }
        }

        function showTab(tabName) {
            currentTab = tabName;
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').style.display = 'block';

            if (tabName === 'friends') {
                showFriendsList();
            }
            if (tabName === 'messages') {
                if (selectedFriend) {
                    loadMessages();
                } else {
                    showFriendsList();
                }
            }
            if (tabName === 'group') {
                loadGroupMessages();
            }
        }

        function showFriendsList() {
            selectedFriend = null;
            document.getElementById('chatHeader').style.display = 'none';
            document.getElementById('messageInputContainer').style.display = 'none';
            document.getElementById('messagesList').innerHTML = `
                <div class="empty-state">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–∞ –¥–ª—è –æ–±—â–µ–Ω–∏—è</h3>
                    <p>–ù–∞–∂–º–∏—Ç–µ "–ß–∞—Ç" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –¥—Ä—É–≥–∞ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥</p>
                </div>
            `;
        }

        function loadFriends() {
            const grid = document.getElementById('friendsGrid');
            grid.innerHTML = '';

            const userData = getUserData();
            const friends = userData.friends || [];

            if (friends.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π</h3>
                        <p>–ù–∞–π–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ü–æ–∏—Å–∫"</p>
                    </div>
                `;
                return;
            }

            friends.forEach(friend => {
                const card = document.createElement('div');
                card.className = 'friend-card';
                card.innerHTML = `
                    <div class="friend-avatar">${friend.avatar || friend.username.charAt(0)}</div>
                    <div class="friend-name">${friend.username}</div>
                    <div class="friend-level">–£—Ä–æ–≤–µ–Ω—å ${friend.level}</div>
                    <div class="friend-stats">
                        <div class="stat">
                            <div class="stat-value">${friend.plants}</div>
                            <div class="stat-label">–†–∞—Å—Ç–µ–Ω–∏—è</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${friend.friends}</div>
                            <div class="stat-label">–î—Ä—É–∑—å—è</div>
                        </div>
                    </div>
                    <div class="online-status ${friend.online ? 'online' : 'offline'}">
                        ${friend.online ? 'üü¢ –í —Å–µ—Ç–∏' : `‚ö´ ${friend.lastSeen || '–ù–µ –≤ —Å–µ—Ç–∏'}`}
                    </div>
                    <div class="friend-actions">
                        <button class="btn btn-primary" onclick="startChat('${friend.username}')">
                            <i class="fas fa-comment"></i> –ß–∞—Ç
                        </button>
                        <button class="btn btn-secondary" onclick="removeFriend('${friend.username}')">
                            <i class="fas fa-user-minus"></i>
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function startChat(username) {
            selectedFriend = username;
            showTab('messages');
            loadMessages();
        }

        function loadMessages() {
            const messagesList = document.getElementById('messagesList');
            const chatHeader = document.getElementById('chatHeader');
            const messageInputContainer = document.getElementById('messageInputContainer');

            if (!selectedFriend) {
                showFriendsList();
                return;
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ –∏ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            chatHeader.style.display = 'flex';
            messageInputContainer.style.display = 'block';
            
            const friend = getUserData().friends?.find(f => f.username === selectedFriend);
            document.getElementById('currentFriendName').textContent = selectedFriend;
            document.getElementById('currentFriendStatus').innerHTML = 
                friend?.online ? 'üü¢ –í —Å–µ—Ç–∏' : `‚ö´ ${friend?.lastSeen || '–ù–µ –≤ —Å–µ—Ç–∏'}`;

            messagesList.innerHTML = '';

            const userData = getUserData();
            const messages = userData.messages || [];
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞
            const chatMessages = messages.filter(msg => 
                (msg.sender === selectedFriend && msg.receiver === currentUser.username) ||
                (msg.sender === currentUser.username && msg.receiver === selectedFriend)
            );

            if (chatMessages.length === 0) {
                messagesList.innerHTML = `
                    <div class="empty-state">
                        <h3>–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π —Å ${selectedFriend}</h3>
                        <p>–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</p>
                    </div>
                `;
                return;
            }

            chatMessages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender === currentUser.username ? 'own' : 'friend'}`;
                messageDiv.innerHTML = `
                    <div class="message-sender">${message.sender}</div>
                    <div class="message-text">${message.text}</div>
                    <div class="message-time">${message.time}</div>
                `;
                messagesList.appendChild(messageDiv);
            });

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
            messagesList.scrollTop = messagesList.scrollHeight;
        }

        function handleMessageKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message && selectedFriend) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.email === currentUser.email);
                
                if (userIndex !== -1) {
                    if (!users[userIndex].messages) {
                        users[userIndex].messages = [];
                    }
                    
                    const newMessage = {
                        sender: currentUser.username,
                        receiver: selectedFriend,
                        text: message,
                        time: new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
                        date: new Date().toISOString().split('T')[0]
                    };
                    
                    users[userIndex].messages.push(newMessage);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    messageInput.value = '';
                    loadMessages();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
                    showTypingIndicator(selectedFriend);
                    
                    // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç–≤–µ—Ç –¥—Ä—É–≥–∞ (–±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç)
                    setTimeout(() => generateFriendResponse(selectedFriend, message), 1000);
                }
            } else if (!selectedFriend) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è!');
            }
        }

        function showTypingIndicator(friendName) {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.textContent = `${friendName} –ø–µ—á–∞—Ç–∞–µ—Ç...`;
            typingIndicator.style.display = 'block';
            
            setTimeout(() => {
                typingIndicator.style.display = 'none';
            }, 1500);
        }

        function generateFriendResponse(friendName, userMessage) {
            const friend = demoUsers.find(f => f.username === friendName);
            if (!friend) return;

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex === -1) return;

            // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
            const personalityResponses = responseDatabase[friend.personality] || [];
            const allResponses = [...personalityResponses, ...generalResponses];
            
            // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞
            const randomResponse = allResponses[Math.floor(Math.random() * allResponses.length)];
            
            const responseMessage = {
                sender: friendName,
                receiver: currentUser.username,
                text: randomResponse,
                time: new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
                date: new Date().toISOString().split('T')[0]
            };
            
            users[userIndex].messages.push(responseMessage);
            localStorage.setItem('users', JSON.stringify(users));
            loadMessages();
        }

        // –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
        function switchGroup(groupName) {
            currentGroup = groupName;
            document.querySelectorAll('.group-option').forEach(option => option.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('groupTitle').textContent = groupTitles[groupName];
            loadGroupMessages();
            updateGroupMembers();
        }

        function loadGroupMessages() {
            const messagesList = document.getElementById('groupMessagesList');
            messagesList.innerHTML = '';

            const userData = getUserData();
            const groupMessages = userData.groupMessages?.[currentGroup] || [];

            if (groupMessages.length === 0) {
                messagesList.innerHTML = `
                    <div class="empty-state">
                        <h3>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ</h3>
                        <p>–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</p>
                    </div>
                `;
                return;
            }

            groupMessages.forEach(message => {
                const messageDiv = document.createElement('div');
                if (message.sender === 'system') {
                    messageDiv.className = 'message system';
                    messageDiv.textContent = message.text;
                } else {
                    messageDiv.className = `message ${message.sender === currentUser.username ? 'own' : 'friend'}`;
                    messageDiv.innerHTML = `
                        <div class="message-sender">${message.sender}</div>
                        <div class="message-text">${message.text}</div>
                        <div class="message-time">${message.time}</div>
                    `;
                }
                messagesList.appendChild(messageDiv);
            });

            messagesList.scrollTop = messagesList.scrollHeight;
        }

        function handleGroupMessageKeypress(event) {
            if (event.key === 'Enter') {
                sendGroupMessage();
            }
        }

        function sendGroupMessage() {
            const messageInput = document.getElementById('groupMessageInput');
            const message = messageInput.value.trim();
            
            if (message) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.email === currentUser.email);
                
                if (userIndex !== -1) {
                    if (!users[userIndex].groupMessages) {
                        users[userIndex].groupMessages = {
                            garden: [],
                            plants: [],
                            tips: [],
                            newbies: [],
                            experts: []
                        };
                    }
                    
                    const newMessage = {
                        sender: currentUser.username,
                        text: message,
                        time: new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
                        date: new Date().toISOString().split('T')[0]
                    };
                    
                    users[userIndex].groupMessages[currentGroup].push(newMessage);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    messageInput.value = '';
                    loadGroupMessages();
                    
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç –¥—Ä—É–∑–µ–π –≤ –≥—Ä—É–ø–ø–µ
                    generateImmediateGroupResponses(message);
                }
            }
        }

        function generateImmediateGroupResponses(userMessage) {
            const userData = getUserData();
            const friends = userData.friends || [];
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã—Ö –¥—Ä—É–∑–µ–π –¥–ª—è –æ—Ç–≤–µ—Ç–∞ (–æ—Ç 1 –¥–æ 3 –¥—Ä—É–∑–µ–π)
            const respondingFriends = friends
                .filter(() => Math.random() > 0.3) // 70% chance to respond
                .slice(0, Math.floor(Math.random() * 3) + 1);
            
            respondingFriends.forEach((friend, index) => {
                const delay = (index + 1) * 2000; // –û—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ 2, 4, 6 —Å–µ–∫—É–Ω–¥
                
                setTimeout(() => {
                    const responses = groupResponses[currentGroup] || [];
                    const response = responses[Math.floor(Math.random() * responses.length)];
                    
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const userIndex = users.findIndex(u => u.email === currentUser.email);
                    
                    if (userIndex !== -1 && users[userIndex].groupMessages) {
                        const groupMessage = {
                            sender: friend.username,
                            text: response,
                            time: new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
                            date: new Date().toISOString().split('T')[0]
                        };
                        
                        users[userIndex].groupMessages[currentGroup].push(groupMessage);
                        localStorage.setItem('users', JSON.stringify(users));
                        loadGroupMessages();
                    }
                }, delay);
            });
        }

        function updateGroupMembers() {
            const userData = getUserData();
            const friends = userData.friends || [];
            const count = friends.length + 1; // +1 –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('groupMembersCount').textContent = count;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            const membersList = document.getElementById('groupMembersList');
            membersList.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const currentUserTag = document.createElement('span');
            currentUserTag.className = 'member-tag';
            currentUserTag.textContent = currentUser.username + ' (–í—ã)';
            membersList.appendChild(currentUserTag);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–∑–µ–π
            friends.slice(0, 8).forEach(friend => { // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã—Ö 8 –¥—Ä—É–∑–µ–π
                const friendTag = document.createElement('span');
                friendTag.className = 'member-tag';
                friendTag.textContent = friend.username;
                membersList.appendChild(friendTag);
            });
            
            if (friends.length > 8) {
                const moreTag = document.createElement('span');
                moreTag.className = 'member-tag';
                moreTag.textContent = `+${friends.length - 8} –µ—â–µ`;
                membersList.appendChild(moreTag);
            }
        }

        function searchUsers() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const resultsGrid = document.getElementById('searchResults');
            resultsGrid.innerHTML = '';

            if (!query) {
                resultsGrid.innerHTML = '<div class="empty-state">–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–ª—è –ø–æ–∏—Å–∫–∞</div>';
                return;
            }

            const allUsers = JSON.parse(localStorage.getItem('users')) || [];
            const currentUserData = getUserData();
            const currentFriends = currentUserData.friends || [];

            const searchResults = allUsers.filter(user => 
                user.username.toLowerCase().includes(query) && 
                user.email !== currentUser.email &&
                !currentFriends.some(f => f.username === user.username)
            );

            if (searchResults.length === 0) {
                resultsGrid.innerHTML = '<div class="empty-state">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            searchResults.forEach(user => {
                const card = document.createElement('div');
                card.className = 'friend-card';
                card.innerHTML = `
                    <div class="friend-avatar">${user.avatar || user.username.charAt(0)}</div>
                    <div class="friend-name">${user.username}</div>
                    <div class="friend-level">–£—Ä–æ–≤–µ–Ω—å ${user.level || 1}</div>
                    <div class="friend-stats">
                        <div class="stat">
                            <div class="stat-value">${user.plants || 0}</div>
                            <div class="stat-label">–†–∞—Å—Ç–µ–Ω–∏—è</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${user.friends ? user.friends.length : 0}</div>
                            <div class="stat-label">–î—Ä—É–∑—å—è</div>
                        </div>
                    </div>
                    <div class="online-status ${user.online ? 'online' : 'offline'}">
                        ${user.online ? 'üü¢ –í —Å–µ—Ç–∏' : `‚ö´ ${user.lastSeen || '–ù–µ –≤ —Å–µ—Ç–∏'}`}
                    </div>
                    <button class="btn btn-primary" onclick="addFriend('${user.username}')">
                        –î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è
                    </button>
                `;
                resultsGrid.appendChild(card);
            });
        }

        function addFriend(username) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            const friendUser = users.find(u => u.username === username);

            if (userIndex !== -1 && friendUser) {
                if (!users[userIndex].friends) {
                    users[userIndex].friends = [];
                }

                if (!users[userIndex].friends.some(f => f.username === username)) {
                    users[userIndex].friends.push({
                        username: friendUser.username,
                        level: friendUser.level || 1,
                        plants: friendUser.plants || 0,
                        friends: friendUser.friends ? friendUser.friends.length : 0,
                        online: friendUser.online || false,
                        avatar: friendUser.avatar,
                        lastSeen: friendUser.lastSeen,
                        personality: friendUser.personality,
                        responseDelay: friendUser.responseDelay,
                        interests: friendUser.interests
                    });

                    localStorage.setItem('users', JSON.stringify(users));
                    alert(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${username} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥—Ä—É–∑—å—è!`);
                    searchUsers();
                    loadFriends();
                    updateGroupMembers();
                }
            }
        }

        function removeFriend(username) {
            if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å ${username} –∏–∑ –¥—Ä—É–∑–µ–π?`)) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.email === currentUser.email);

                if (userIndex !== -1 && users[userIndex].friends) {
                    users[userIndex].friends = users[userIndex].friends.filter(f => f.username !== username);
                    localStorage.setItem('users', JSON.stringify(users));
                    loadFriends();
                    updateGroupMembers();
                    
                    if (selectedFriend === username) {
                        selectedFriend = null;
                        if (currentTab === 'messages') {
                            loadMessages();
                        }
                    }
                }
            }
        }

        function getUserData() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            return users.find(u => u.email === currentUser.email) || {};
        }
    </script>
    <script>
// –û–±—â–∏–π –∫–æ–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
function applyThemeSettings() {
    const settings = JSON.parse(localStorage.getItem('appSettings')) || {};
    
    if (settings.theme) {
        document.body.setAttribute('data-theme', settings.theme);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º dark mode –¥–ª—è –Ω–µ-—Ç–µ–º–Ω—ã—Ö —Ç–µ–º
        if (settings.darkMode && settings.theme !== 'dark') {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }
    }
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
    if (settings.fontSize) {
        document.body.style.fontSize = settings.fontSize + 'px';
    }
    if (settings.fontFamily) {
        document.body.style.fontFamily = settings.fontFamily + ', sans-serif';
    }
}

// –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    applyThemeSettings();
});
</script>
</body>
</html>