<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ö–æ–¥ –∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏ - Garden Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Quicksand:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="js/settings-manager.js"></script>
    <script src="theme-manager.js"></script>
    <script src="lang.js"></script>
    <style>
:root {
            --primary: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #E8F5E9;
            --accent: #FF4081;
            --text: #333333;
            --text-light: #666666;
            --background: #F9F9F9;
            --card-bg: #FFFFFF;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --radius: 16px;
            --border: #e0e0e0;
        }

        [data-theme="dark"] {
            --primary: #66bb6a;
            --primary-dark: #388e3c;
            --primary-light: #1b5e20;
            --text: #ffffff;
            --text-light: #b0b0b0;
            --background: #121212;
            --card-bg: #1e1e1e;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #333333;
        }

        [data-theme="green"] {
            --primary: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #E8F5E9;
            --text: #1B5E20;
            --text-light: #4CAF50;
            --background: #F1F8E9;
            --card-bg: #FFFFFF;
            --shadow: 0 4px 20px rgba(76, 175, 80, 0.15);
            --border: #C8E6C9;
        }

        [data-theme="blue"] {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --primary-light: #E3F2FD;
            --text: #0D47A1;
            --text-light: #2196F3;
            --background: #E3F2FD;
            --card-bg: #FFFFFF;
            --shadow: 0 4px 20px rgba(33, 150, 243, 0.15);
            --border: #BBDEFB;
        }

        [data-theme="green"].dark-mode {
            --primary: #66bb6a;
            --primary-dark: #388e3c;
            --primary-light: #1b5e20;
            --text: #e8f5e9;
            --text-light: #a5d6a7;
            --background: #1b311c;
            --card-bg: #2e4630;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #1b5e20;
        }

        [data-theme="blue"].dark-mode {
            --primary: #64b5f6;
            --primary-dark: #1976d2;
            --primary-light: #0d47a1;
            --text: #e3f2fd;
            --text-light: #90caf9;
            --background: #0d1b33;
            --card-bg: #1e2b47;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --border: #1565c0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
        }

        body {
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
            transition: all 0.3s ease;
        }

        .flower {
            position: fixed;
            z-index: 0;
            opacity: 0.7;
            pointer-events: none;
        }

        .flower-1 {
            top: 10%;
            left: 10%;
            font-size: 40px;
            color: var(--primary);
            transform: rotate(-15deg);
        }

        .flower-2 {
            bottom: 15%;
            right: 10%;
            font-size: 35px;
            color: var(--primary-dark);
            transform: rotate(25deg);
        }

        .flower-3 {
            top: 20%;
            right: 15%;
            font-size: 30px;
            color: var(--accent);
            transform: rotate(10deg);
        }

        .flower-4 {
            bottom: 20%;
            left: 15%;
            font-size: 45px;
            color: var(--primary-light);
            transform: rotate(-20deg);
        }

        .petal {
            position: absolute;
            width: 10px;
            height: 10px;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            border-radius: 50% 50% 50% 0;
            opacity: 0.6;
            animation: fall 15s linear infinite;
            pointer-events: none;
        }

        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0.7; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary-dark);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo-icon {
            font-size: 2em;
            color: var(--primary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .user-name {
            font-weight: 600;
            color: var(--primary-dark);
            font-size: 1.1em;
            cursor: pointer;
        }

        .user-level {
            font-size: 0.9em;
            color: var(--text-light);
            margin-top: 2px;
        }

        .logout-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }

        .logout-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            margin-left: 30px;
        }

        .nav-item {
            padding: 8px 16px;
            border-radius: 8px;
            color: var(--primary-dark);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .game-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            margin-bottom: 30px;
            min-height: 70vh;
        }

        .plant-info {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .care-area {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        .plant-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--primary-light);
            border-radius: var(--radius);
            margin-bottom: 25px;
            position: relative;
            min-height: 350px;
            border: 1px solid var(--border);
            padding: 20px;
        }

        .plant-image {
            font-size: 8em;
            transition: all 0.5s ease;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
        }

        .plant-mood {
            font-size: 1.3em;
            font-weight: 600;
            text-align: center;
            padding: 12px 20px;
            border-radius: 25px;
            background: var(--card-bg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .plant-needs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .need-item {
            background: var(--primary-light);
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
            position: relative;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }

        .need-item:hover {
            transform: translateY(-2px);
        }

        .need-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .need-bar {
            height: 12px;
            background: var(--border);
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .need-progress {
            height: 100%;
            border-radius: 6px;
            transition: width 0.3s ease;
        }

        .water-progress { background: #2196f3; }
        .light-progress { background: #ffeb3b; }
        .food-progress { background: #8bc34a; }
        .love-progress { background: #e91e63; }

        .care-tools {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: auto;
        }

        .tool {
            background: var(--primary-light);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .tool:hover {
            transform: translateY(-3px);
            background: var(--primary);
            color: white;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .tool:disabled {
            background: var(--border);
            border-color: var(--text-light);
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
            color: var(--text-light);
        }

        .cooldown-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: var(--radius);
            font-size: 1.5em;
        }

        .plant-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat {
            background: var(--primary-light);
            padding: 15px;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 5px;
        }

        .progress-container {
            margin: 25px 0;
            padding: 20px;
            background: var(--primary-light);
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }

        .level-bar {
            height: 20px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            margin-top: 10px;
        }

        .level-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .level-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9em;
            font-weight: bold;
            color: var(--text);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 0px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            border: 1px solid var(--border);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #f44336;
        }

        .notification.warning {
            background: #ff9800;
        }

        .achievement-badge {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
            display: inline-block;
            box-shadow: var(--shadow);
        }

        .plant-evolution {
            margin: 20px 0;
            padding: 20px;
            background: var(--primary-light);
            border-radius: var(--radius);
            border-left: 4px solid var(--primary);
            border: 1px solid var(--border);
        }

        .season-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--card-bg);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .plant-effects {
            position: absolute;
            bottom: 15px;
            left: 15px;
            font-size: 1.8em;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            color: var(--primary-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }

        @keyframes grow {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .growing {
            animation: grow 0.5s ease;
        }

        .shaking {
            animation: shake 0.5s ease;
        }

        .tool-tip {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text);
            color: var(--card-bg);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 10;
        }

        .tool:hover .tool-tip {
            opacity: 1;
        }

        .petals-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .info-section {
            margin: 25px 0;
        }

        .info-section h3 {
            color: var(--primary-dark);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-section li:before {
            content: "üå±";
            font-size: 1.2em;
        }

        @media (max-width: 900px) {
            .game-container {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .user-info {
                flex-direction: column;
                text-align: center;
            }
            
            .user-details {
                align-items: center;
            }
            
            .nav-menu {
                margin-left: 0;
                justify-content: center;
                flex-wrap: wrap;
            }

            .plant-info {
                position: static;
            }

            .plant-needs {
                grid-template-columns: 1fr;
            }

            .care-tools {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .plant-stats {
                grid-template-columns: 1fr;
            }
            
            .care-tools {
                grid-template-columns: 1fr;
            }
            
            .plant-image {
                font-size: 6em;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo" onclick="window.location.href='main-site.html'">
            <div class="logo-icon">üåø</div>
            <div class="logo-text">Plant Care</div>
        </div>
        <div>
            <button class="btn btn-secondary" onclick="window.location.href='games.html'">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            <button class="btn btn-primary" onclick="nextPlant()">
                –°–ª–µ–¥—É—é—â–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </header>

    <div class="game-container">
        <div class="plant-info">
            <h2 id="plantName">–ü–æ–¥—Å–æ–ª–Ω—É—Ö</h2>
            <div class="plant-stats">
                <div class="stat">
                    <div class="stat-value" id="plantHealth">100%</div>
                    <div>–ó–¥–æ—Ä–æ–≤—å–µ</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="plantLevel">1</div>
                    <div>–£—Ä–æ–≤–µ–Ω—å</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="carePoints">0</div>
                    <div>–û—á–∫–∏ —É—Ö–æ–¥–∞</div>
                </div>
            </div>

            <div class="progress-container">
                <div>–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è: <span id="expText">0/100</span></div>
                <div class="level-bar">
                    <div class="level-progress" id="levelProgress" style="width: 0%"></div>
                    <div class="level-text" id="levelText">0%</div>
                </div>
            </div>

            <div class="plant-evolution">
                <strong>–°–ª–µ–¥—É—é—â–∞—è —ç–≤–æ–ª—é—Ü–∏—è:</strong>
                <div id="nextEvolution">–£—Ä–æ–≤–µ–Ω—å 2 - –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É—Ö–æ–¥–∞!</div>
            </div>

            <h3>–û —Ä–∞—Å—Ç–µ–Ω–∏–∏</h3>
            <p id="plantDescription">–ü–æ–¥—Å–æ–ª–Ω—É—Ö - —Å–æ–ª–Ω–µ—á–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞.</p>

            <h3>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É—Ö–æ–¥–∞</h3>
            <ul id="plantTips">
                <li>–õ—é–±–∏—Ç —Å–æ–ª–Ω–µ—á–Ω—ã–µ –º–µ—Å—Ç–∞</li>
                <li>–¢—Ä–µ–±—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–ª–∏–≤–∞</li>
                <li>–£–¥–æ–±—Ä—è—Ç—å —Ä–∞–∑ –≤ 2 –Ω–µ–¥–µ–ª–∏</li>
            </ul>

            <div class="achievements">
                <h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                <div id="achievementsList"></div>
            </div>
        </div>

        <div class="care-area">
            <div class="plant-display">
                <div class="season-indicator" id="seasonIndicator">üåû –õ–µ—Ç–æ</div>
                <div class="plant-image" id="plantImage">üåª</div>
                <div class="plant-mood" id="plantMood"></div>
                <div class="plant-effects" id="plantEffects"></div>
            </div>

            <div class="plant-needs">
                <div class="need-item">
                    <div class="need-icon">üíß</div>
                    <div>–ü–æ–ª–∏–≤</div>
                    <div class="need-bar">
                        <div class="need-progress water-progress" id="waterNeed" style="width: 100%"></div>
                    </div>
                    <div id="waterStatus">–û—Ç–ª–∏—á–Ω–æ</div>
                </div>
                <div class="need-item">
                    <div class="need-icon">üåû</div>
                    <div>–°–≤–µ—Ç</div>
                    <div class="need-bar">
                        <div class="need-progress light-progress" id="lightNeed" style="width: 100%"></div>
                    </div>
                    <div id="lightStatus">–û—Ç–ª–∏—á–Ω–æ</div>
                </div>
                <div class="need-item">
                    <div class="need-icon">üçÉ</div>
                    <div>–£–¥–æ–±—Ä–µ–Ω–∏—è</div>
                    <div class="need-bar">
                        <div class="need-progress food-progress" id="foodNeed" style="width: 100%"></div>
                    </div>
                    <div id="foodStatus">–û—Ç–ª–∏—á–Ω–æ</div>
                </div>
                <div class="need-item">
                    <div class="need-icon">‚ù§Ô∏è</div>
                    <div>–ó–∞–±–æ—Ç–∞</div>
                    <div class="need-bar">
                        <div class="need-progress love-progress" id="loveNeed" style="width: 100%"></div>
                    </div>
                    <div id="loveStatus">–û—Ç–ª–∏—á–Ω–æ</div>
                </div>
            </div>

            <div class="care-tools">
                <button class="tool" onclick="careForPlant('water')" id="waterTool">
                    <div style="font-size: 2em;">üíß</div>
                    <div>–ü–æ–ª–∏—Ç—å</div>
                    <div class="tool-tip">–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–ª–∞–≥—É</div>
                </button>
                <button class="tool" onclick="careForPlant('light')" id="lightTool">
                    <div style="font-size: 2em;">üí°</div>
                    <div>–û—Å–≤–µ—Ç–∏—Ç—å</div>
                    <div class="tool-tip">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ</div>
                </button>
                <button class="tool" onclick="careForPlant('food')" id="foodTool">
                    <div style="font-size: 2em;">üå±</div>
                    <div>–£–¥–æ–±—Ä–∏—Ç—å</div>
                    <div class="tool-tip">–î–æ–±–∞–≤–ª—è–µ—Ç –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞</div>
                </button>
                <button class="tool" onclick="careForPlant('love')" id="loveTool">
                    <div style="font-size: 2em;">‚ù§Ô∏è</div>
                    <div>–ü–æ–≥–ª–∞–¥–∏—Ç—å</div>
                    <div class="tool-tip">–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è</div>
                </button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        –£—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! +10 –æ—á–∫–æ–≤
    </div>

    <script>
        const plants = [
            {
                id: 1,
                name: "–ü–æ–¥—Å–æ–ª–Ω—É—Ö",
                icon: "üåª",
                description: "–°–æ–ª–Ω–µ—á–Ω—ã–π —Ü–≤–µ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫ —Å–æ–ª–Ω—Ü—É. –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ –∏ —Ç–µ–ø–ª–∞.",
                tips: ["–ü–æ–ª–∏–≤–∞—Ç—å —É—Ç—Ä–æ–º", "–õ—é–±–∏—Ç –ø—Ä—è–º—ã–µ —Å–æ–ª–Ω–µ—á–Ω—ã–µ –ª—É—á–∏", "–£–¥–æ–±—Ä—è—Ç—å –≤ –ø–µ—Ä–∏–æ–¥ —Ä–æ—Å—Ç–∞"],
                needs: { water: 80, light: 90, food: 70, love: 60 },
                decayRates: { water: 3, light: 1, food: 2, love: 1 }
            },
            {
                id: 2, 
                name: "–†–æ–∑–∞",
                icon: "üåπ",
                description: "–ö–æ—Ä–æ–ª–µ–≤–∞ —Ü–≤–µ—Ç–æ–≤. –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ —É—Ö–æ–¥–∞ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –≤—Ä–µ–¥–∏—Ç–µ–ª–µ–π.",
                tips: ["–ü–æ–ª–∏–≤–∞—Ç—å –ø–æ–¥ –∫–æ—Ä–µ–Ω—å", "–û–±—Ä–µ–∑–∞—Ç—å —Å—É—Ö–∏–µ –≤–µ—Ç–∫–∏", "–ó–∞—â–∏—â–∞—Ç—å –æ—Ç —Ç–ª–∏"],
                needs: { water: 70, light: 80, food: 85, love: 75 },
                decayRates: { water: 2, light: 2, food: 1, love: 2 }
            },
            {
                id: 3,
                name: "–ö–∞–∫—Ç—É—Å",
                icon: "üåµ", 
                description: "–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ, –∏–¥–µ–∞–ª—å–Ω–æ–µ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Å–∞–¥–æ–≤–æ–¥–æ–≤.",
                tips: ["–†–µ–¥–∫–∏–π –ø–æ–ª–∏–≤", "–ú–Ω–æ–≥–æ —Å–≤–µ—Ç–∞", "–ù–µ –ø–µ—Ä–µ—É–≤–ª–∞–∂–Ω—è—Ç—å"],
                needs: { water: 30, light: 95, food: 40, love: 50 },
                decayRates: { water: 1, light: 1, food: 1, love: 1 }
            },
            {
                id: 4,
                name: "–û—Ä—Ö–∏–¥–µ—è",
                icon: "üå∏",
                description: "–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–π —Ü–≤–µ—Ç–æ–∫, —Ç—Ä–µ–±—É—é—â–∏–π –æ—Å–æ–±—ã—Ö —É—Å–ª–æ–≤–∏–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è.",
                tips: ["–ü–æ–ª–∏–≤ –º–µ—Ç–æ–¥–æ–º –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è", "–†–∞—Å—Å–µ—è–Ω–Ω—ã–π —Å–≤–µ—Ç", "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—É–±—Å—Ç—Ä–∞—Ç"],
                needs: { water: 65, light: 75, food: 80, love: 85 },
                decayRates: { water: 2, light: 2, food: 3, love: 2 }
            },
            {
                id: 5,
                name: "–ë–æ–Ω—Å–∞–π",
                icon: "üéã",
                description: "–ú–∏–Ω–∏–∞—Ç—é—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ, –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Ä–ø–µ–Ω–∏—è.",
                tips: ["–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞", "–£–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª–∏–≤", "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É–¥–æ–±—Ä–µ–Ω–∏—è"],
                needs: { water: 60, light: 70, food: 75, love: 90 },
                decayRates: { water: 2, light: 1, food: 2, love: 3 }
            }
        ];

        const seasons = [
            { name: "üå± –í–µ—Å–Ω–∞", effect: { water: 1, light: 1, food: 1.2, love: 1 } },
            { name: "üåû –õ–µ—Ç–æ", effect: { water: 1.3, light: 1.2, food: 1, love: 1 } },
            { name: "üçÇ –û—Å–µ–Ω—å", effect: { water: 0.8, light: 0.7, food: 1, love: 1.1 } },
            { name: "‚ùÑÔ∏è –ó–∏–º–∞", effect: { water: 0.6, light: 0.5, food: 0.8, love: 1.2 } }
        ];

        let currentPlantIndex = 0;
        let currentSeasonIndex = 0;
        let plantState = {
            water: 100,
            light: 100,
            food: 100,
            love: 100,
            health: 100,
            level: 1,
            experience: 0,
            carePoints: 0,
            totalCares: 0,
            evolutionStage: 0
        };

        let careCooldowns = {
            water: 0,
            light: 0,
            food: 0,
            love: 0
        };

        let needsInterval;
        let seasonInterval;

        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            if (!currentUser) {
                window.location.href = 'index.html';
                return;
            }

            loadPlantData();
            startNeedsDecay();
            startSeasonCycle();
            updateDisplay();
            loadAchievements();
            updateToolCooldowns();
        });

        function loadPlantData() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            const userData = users.find(u => u.email === currentUser.email);
            
            if (userData && userData.plantCare) {
                plantState = { ...plantState, ...userData.plantCare };
                currentPlantIndex = userData.plantCare.currentPlantIndex || 0;
                currentSeasonIndex = userData.plantCare.currentSeasonIndex || 0;
            }
        }

        function savePlantData() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex !== -1) {
                if (!users[userIndex].plantCare) {
                    users[userIndex].plantCare = {};
                }
                users[userIndex].plantCare = { 
                    ...plantState, 
                    currentPlantIndex, 
                    currentSeasonIndex 
                };
                localStorage.setItem('users', JSON.stringify(users));
            }
        }

        function startNeedsDecay() {
            clearInterval(needsInterval);
            needsInterval = setInterval(() => {
                const plant = plants[currentPlantIndex];
                const season = seasons[currentSeasonIndex];
                
                // –£–º–µ–Ω—å—à–∞–µ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º —Å–µ–∑–æ–Ω–∞ –∏ —Ç–∏–ø–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è
                plantState.water = Math.max(0, plantState.water - plant.decayRates.water * season.effect.water);
                plantState.light = Math.max(0, plantState.light - plant.decayRates.light * season.effect.light);
                plantState.food = Math.max(0, plantState.food - plant.decayRates.food * season.effect.food);
                plantState.love = Math.max(0, plantState.love - plant.decayRates.love * season.effect.love);
                
                updateHealth();
                updateDisplay();
                savePlantData();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                checkCriticalStates();
            }, 8000); // –ö–∞–∂–¥—ã–µ 8 —Å–µ–∫—É–Ω–¥
        }

        function startSeasonCycle() {
            clearInterval(seasonInterval);
            seasonInterval = setInterval(() => {
                currentSeasonIndex = (currentSeasonIndex + 1) % seasons.length;
                updateDisplay();
                showNotification(`–°–º–µ–Ω–∞ —Å–µ–∑–æ–Ω–∞: ${seasons[currentSeasonIndex].name}`, 'warning');
            }, 60000); // –°–º–µ–Ω–∞ —Å–µ–∑–æ–Ω–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        }

        function updateHealth() {
            const weights = { water: 0.3, light: 0.25, food: 0.25, love: 0.2 };
            const weightedHealth = 
                (plantState.water * weights.water) +
                (plantState.light * weights.light) +
                (plantState.food * weights.food) +
                (plantState.love * weights.love);
            
            plantState.health = Math.max(0, Math.min(100, weightedHealth));
        }

        function careForPlant(type) {
            if (careCooldowns[type] > 0) {
                showNotification(`–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${careCooldowns[type]}—Å –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —É—Ö–æ–¥–æ–º!`, 'error');
                return;
            }

            const plant = plants[currentPlantIndex];
            const careValues = {
                water: 25 + plant.level * 5,
                light: 20 + plant.level * 4,
                food: 30 + plant.level * 6,
                love: 15 + plant.level * 3
            };

            const bonus = plantState.level >= 5 ? 1.2 : 1;
            const value = Math.min(100, plantState[type] + careValues[type] * bonus);

            plantState[type] = value;
            plantState.carePoints += 10;
            plantState.totalCares += 1;
            plantState.experience += 15;

            // –ê–Ω–∏–º–∞—Ü–∏—è
            const plantImage = document.getElementById('plantImage');
            plantImage.classList.add('growing');
            setTimeout(() => plantImage.classList.remove('growing'), 500);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            checkLevelUp();

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞
            careCooldowns[type] = 3; // 3 —Å–µ–∫—É–Ω–¥—ã
            updateToolCooldowns();

            showNotification(`–£—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! +15 –æ–ø—ã—Ç–∞`, 'success');
            updateDisplay();
            savePlantData();
            checkAchievements();
        }

        function updateToolCooldowns() {
            Object.keys(careCooldowns).forEach(type => {
                const tool = document.getElementById(`${type}Tool`);
                if (careCooldowns[type] > 0) {
                    tool.disabled = true;
                    let cooldown = careCooldowns[type];
                    
                    const cooldownInterval = setInterval(() => {
                        if (cooldown <= 0) {
                            tool.disabled = false;
                            tool.innerHTML = tool.innerHTML.replace(/<div class="cooldown-overlay">.*?<\/div>/, '');
                            clearInterval(cooldownInterval);
                            return;
                        }
                        
                        const existingOverlay = tool.querySelector('.cooldown-overlay');
                        if (existingOverlay) {
                            existingOverlay.textContent = cooldown;
                        } else {
                            const overlay = document.createElement('div');
                            overlay.className = 'cooldown-overlay';
                            overlay.textContent = cooldown;
                            tool.appendChild(overlay);
                        }
                        
                        cooldown--;
                    }, 1000);
                }
            });
        }

        function checkLevelUp() {
            const expNeeded = plantState.level * 100;
            if (plantState.experience >= expNeeded) {
                plantState.level++;
                plantState.experience = 0;
                
                // –≠–≤–æ–ª—é—Ü–∏—è —Ä–∞—Å—Ç–µ–Ω–∏—è
                if (plantState.level % 3 === 0) {
                    plantState.evolutionStage++;
                    showNotification(`üéâ –≠–≤–æ–ª—é—Ü–∏—è! –†–∞—Å—Ç–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–≥–ª–æ –Ω–æ–≤–æ–π —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è!`, 'success');
                }
                
                showNotification(`üéâ –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${plantState.level}`, 'success');
                updateDisplay();
            }
        }

        function checkCriticalStates() {
            if (plantState.water < 20) {
                showNotification(`üíß –†–∞—Å—Ç–µ–Ω–∏–µ —Å–∏–ª—å–Ω–æ —Ö–æ—á–µ—Ç –ø–∏—Ç—å!`, 'warning');
            }
            if (plantState.light < 20) {
                showNotification(`üåû –†–∞—Å—Ç–µ–Ω–∏—é –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–≤–µ—Ç–∞!`, 'warning');
            }
            if (plantState.food < 20) {
                showNotification(`üçÉ –†–∞—Å—Ç–µ–Ω–∏–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —É–¥–æ–±—Ä–µ–Ω–∏—è—Ö!`, 'warning');
            }
            if (plantState.health < 30) {
                showNotification(`üö® –†–∞—Å—Ç–µ–Ω–∏–µ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏!`, 'error');
            }
        }

        function updateDisplay() {
            const plant = plants[currentPlantIndex];
            const season = seasons[currentSeasonIndex];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å—Ç–µ–Ω–∏–∏
            document.getElementById('plantName').textContent = plant.name;
            document.getElementById('plantImage').textContent = plant.icon;
            document.getElementById('plantDescription').textContent = plant.description;
            document.getElementById('seasonIndicator').textContent = season.name;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            document.getElementById('plantHealth').textContent = Math.round(plantState.health) + '%';
            document.getElementById('plantLevel').textContent = plantState.level;
            document.getElementById('carePoints').textContent = plantState.carePoints;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è
            const expNeeded = plantState.level * 100;
            const progressPercent = (plantState.experience / expNeeded) * 100;
            document.getElementById('levelProgress').style.width = progressPercent + '%';
            document.getElementById('levelText').textContent = Math.round(progressPercent) + '%';
            document.getElementById('expText').textContent = `${plantState.experience}/${expNeeded}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç–≤–æ–ª—é—Ü–∏–∏
            document.getElementById('nextEvolution').textContent = 
                plantState.level < 15 ? `–£—Ä–æ–≤–µ–Ω—å ${plantState.level + 1} - –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏!` : '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç!';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
            document.getElementById('waterNeed').style.width = plantState.water + '%';
            document.getElementById('lightNeed').style.width = plantState.light + '%';
            document.getElementById('foodNeed').style.width = plantState.food + '%';
            document.getElementById('loveNeed').style.width = plantState.love + '%';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å—ã
            document.getElementById('waterStatus').textContent = getStatusText(plantState.water);
            document.getElementById('lightStatus').textContent = getStatusText(plantState.light);
            document.getElementById('foodStatus').textContent = getStatusText(plantState.food);
            document.getElementById('loveStatus').textContent = getStatusText(plantState.love);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–≤–µ—Ç—ã –ø–æ —É—Ö–æ–¥—É
            const tipsList = document.getElementById('plantTips');
            tipsList.innerHTML = '';
            plant.tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                tipsList.appendChild(li);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞—Å—Ç–µ–Ω–∏—è
            updatePlantMood();
            updatePlantEffects();
        }

        function getStatusText(value) {
            if (value >= 80) return '–û—Ç–ª–∏—á–Ω–æ';
            if (value >= 60) return '–•–æ—Ä–æ—à–æ';
            if (value >= 40) return '–ù–æ—Ä–º–∞–ª—å–Ω–æ';
            if (value >= 20) return '–ü–ª–æ—Ö–æ';
            return '–ö—Ä–∏—Ç–∏—á–Ω–æ';
        }

        function updatePlantMood() {
            const moodElement = document.getElementById('plantMood');
            const health = plantState.health;
            
            if (health >= 80) {
                moodElement.textContent = 'üòä –†–∞—Å—Ç–µ–Ω–∏–µ —Å—á–∞—Å—Ç–ª–∏–≤–æ!';
                moodElement.style.background = '#c8e6c9';
            } else if (health >= 60) {
                moodElement.textContent = 'üôÇ –†–∞—Å—Ç–µ–Ω–∏–µ –¥–æ–≤–æ–ª—å–Ω–æ';
                moodElement.style.background = '#e8f5e9';
            } else if (health >= 40) {
                moodElement.textContent = 'üòê –†–∞—Å—Ç–µ–Ω–∏–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —É—Ö–æ–¥–µ';
                moodElement.style.background = '#fff3e0';
            } else if (health >= 20) {
                moodElement.textContent = 'üòü –†–∞—Å—Ç–µ–Ω–∏–µ –ø–ª–æ—Ö–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç';
                moodElement.style.background = '#ffebee';
            } else {
                moodElement.textContent = 'üòµ –†–∞—Å—Ç–µ–Ω–∏–µ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏!';
                moodElement.style.background = '#ffcdd2';
            }
        }

        function updatePlantEffects() {
            const effectsElement = document.getElementById('plantEffects');
            effectsElement.innerHTML = '';
            
            if (plantState.level >= 3) {
                effectsElement.innerHTML += '‚ú®';
            }
            if (plantState.level >= 6) {
                effectsElement.innerHTML += 'üåü';
            }
            if (plantState.level >= 9) {
                effectsElement.innerHTML += 'üí´';
            }
        }

        function nextPlant() {
            currentPlantIndex = (currentPlantIndex + 1) % plants.length;
            showNotification(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞: ${plants[currentPlantIndex].name}`, 'success');
            updateDisplay();
            savePlantData();
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            
            if (type === 'error') {
                notification.classList.add('error');
            } else if (type === 'warning') {
                notification.classList.add('warning');
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function loadAchievements() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            const userData = users.find(u => u.email === currentUser.email);
            const achievements = userData?.achievements || [];
            
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = '';
            
            const plantAchievements = [
                { id: 'care_1', name: '–ü–µ—Ä–≤—ã–π —É—Ö–æ–¥', icon: 'üå±', desc: '–ü–æ–∑–∞–±–æ—Ç—å—Ç–µ—Å—å –æ —Ä–∞—Å—Ç–µ–Ω–∏–∏ –≤–ø–µ—Ä–≤—ã–µ' },
                { id: 'care_50', name: '–û–ø—ã—Ç–Ω—ã–π —Å–∞–¥–æ–≤–æ–¥', icon: 'üë®‚Äçüåæ', desc: '–í—ã–ø–æ–ª–Ω–∏—Ç–µ 50 —É—Ö–æ–¥–æ–≤' },
                { id: 'care_100', name: '–ú–∞—Å—Ç–µ—Ä —É—Ö–æ–¥–∞', icon: 'üèÜ', desc: '–í—ã–ø–æ–ª–Ω–∏—Ç–µ 100 —É—Ö–æ–¥–æ–≤' },
                { id: 'level_5', name: '–†–∞—Å—Ç—É—â–∏–π —Å–∞–¥–æ–≤–æ–¥', icon: 'üìà', desc: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 5 —É—Ä–æ–≤–Ω—è' },
                { id: 'level_10', name: '–≠–∫—Å–ø–µ—Ä—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π', icon: 'üéì', desc: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 10 —É—Ä–æ–≤–Ω—è' },
                { id: 'evolution_1', name: '–ü–µ—Ä–≤–∞—è —ç–≤–æ–ª—é—Ü–∏—è', icon: 'üî¨', desc: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 3 —É—Ä–æ–≤–Ω—è' },
                { id: 'all_plants', name: '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä', icon: 'üåø', desc: '–£—Ö–∞–∂–∏–≤–∞–π—Ç–µ –∑–∞ –≤—Å–µ–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏' }
            ];
            
            plantAchievements.forEach(ach => {
                const achieved = achievements.includes(ach.id);
                const div = document.createElement('div');
                div.className = 'achievement' + (achieved ? ' achieved' : '');
                div.innerHTML = `
                    <span style="font-size: 1.5em;">${ach.icon}</span>
                    <div style="flex: 1;">
                        <div style="font-weight: 600;">${ach.name}</div>
                        <small style="color: #666;">${ach.desc}</small>
                    </div>
                    ${achieved ? '<span style="color: #4caf50; font-size: 1.2em;">‚úì</span>' : 
                                '<span style="color: #ccc; font-size: 1.2em;">‚óã</span>'}
                `;
                div.style.display = 'flex';
                div.style.alignItems = 'center';
                div.style.gap = '10px';
                div.style.marginBottom = '10px';
                div.style.padding = '10px';
                div.style.background = achieved ? '#e8f5e9' : '#f5f5f5';
                div.style.borderRadius = '8px';
                div.style.border = achieved ? '2px solid #4caf50' : '2px solid transparent';
                
                achievementsList.appendChild(div);
            });
        }

        function checkAchievements() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex === -1) return;
            
            if (!users[userIndex].achievements) {
                users[userIndex].achievements = [];
            }
            
            const achievements = users[userIndex].achievements;
            const newAchievements = [];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            if (plantState.totalCares >= 1 && !achievements.includes('care_1')) {
                achievements.push('care_1');
                newAchievements.push('–ü–µ—Ä–≤—ã–π —É—Ö–æ–¥');
            }
            
            if (plantState.totalCares >= 50 && !achievements.includes('care_50')) {
                achievements.push('care_50');
                newAchievements.push('–û–ø—ã—Ç–Ω—ã–π —Å–∞–¥–æ–≤–æ–¥');
            }
            
            if (plantState.totalCares >= 100 && !achievements.includes('care_100')) {
                achievements.push('care_100');
                newAchievements.push('–ú–∞—Å—Ç–µ—Ä —É—Ö–æ–¥–∞');
            }
            
            if (plantState.level >= 5 && !achievements.includes('level_5')) {
                achievements.push('level_5');
                newAchievements.push('–†–∞—Å—Ç—É—â–∏–π —Å–∞–¥–æ–≤–æ–¥');
            }
            
            if (plantState.level >= 10 && !achievements.includes('level_10')) {
                achievements.push('level_10');
                newAchievements.push('–≠–∫—Å–ø–µ—Ä—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π');
            }
            
            if (plantState.level >= 3 && !achievements.includes('evolution_1')) {
                achievements.push('evolution_1');
                newAchievements.push('–ü–µ—Ä–≤–∞—è —ç–≤–æ–ª—é—Ü–∏—è');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Ö–æ–¥ –∑–∞ –≤—Å–µ–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏
            const plantCares = users[userIndex].plantCares || {};
            const allPlantsCared = plants.every(plant => plantCares[plant.id] > 0);
            if (allPlantsCared && !achievements.includes('all_plants')) {
                achievements.push('all_plants');
                newAchievements.push('–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä');
            }
            
            if (newAchievements.length > 0) {
                localStorage.setItem('users', JSON.stringify(users));
                showNotification('üéâ –ù–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ' + newAchievements.join(', '));
                loadAchievements();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
                if (window.gameSystem) {
                    newAchievements.forEach(() => {
                        window.gameSystem.checkAchievement('plant_master', true);
                    });
                }
            }
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', savePlantData);
    </script>
    <script>
// –û–±—â–∏–π –∫–æ–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
function applyThemeSettings() {
    const settings = JSON.parse(localStorage.getItem('appSettings')) || {};
    
    if (settings.theme) {
        document.body.setAttribute('data-theme', settings.theme);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º dark mode –¥–ª—è –Ω–µ-—Ç–µ–º–Ω—ã—Ö —Ç–µ–º
        if (settings.darkMode && settings.theme !== 'dark') {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }
    }
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
    if (settings.fontSize) {
        document.body.style.fontSize = settings.fontSize + 'px';
    }
    if (settings.fontFamily) {
        document.body.style.fontFamily = settings.fontFamily + ', sans-serif';
    }
}

// –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    applyThemeSettings();
});
</script>
</body>
</html>